(function(a){function f(a,b){if(window.location.hostname!="dev.atlason.com")return;typeof b=="undefined"?!1:b,window.console&&console.log(a),b&&alert("Debug: "+a);return}hijax={};var b={context:"hijax.js",containerSelector:".default-ajax-receiver:first",contentContainer:a([]),animateBefore:{},callback:{},pageHit:{},readyCheck:function(){return!1},onStatechange:function(a){return},initialized:!1},c=document.location.protocol+"//"+(document.location.hostname||document.location.host);a.hijax_init=function(c){b.initialized||(b=a.extend(b,c),b.initialized=!0,c.initialized=!0),typeof History!="undefined"&&History.Adapter&&(History.Adapter.bind(window,"anchorchange",function(a){a=a}),History.Adapter.bind(window,"statechange",d),History.Adapter.bind(window,"anchorchange",e));return},a.fn.hijax=function(){return typeof window.History=="undefined"?this:this.addClass("hijaxed").unbind("click.hijax").bind("click.hijax",hijax.clickHandler)},hijax.clickHandler=function(b){if(typeof window.History=="undefined")return!0;b.preventDefault();var d=a(b.currentTarget),e=d.attr("href");if(typeof e=="undefined")return;if(e=="")return;e=decodeURI(e),e=e.replace(c,"");var f=window.History.getState(),g=/^[a-z]+:\/\/\/?[^\/]+(\/[^?]*)/i,h=g.exec(f.cleanUrl)[1];return e!="#"&&window.History&&window.History.pushState(null,null,e),!1},a.hijax_addState=function(b,d,e){typeof d=="undefined"&&(d={});var f=window.History.getState(),g=/^[a-z]+:\/\/\/?[^\/]+(\/[^?]*)/i,h=g.exec(f.cleanUrl)[1];a.extend(d,{previousHref:h}),b=b.replace(c,"");if(b!=f.url.replace(c,"")||e)d.newWindowTitle?window.History.pushState(null,d.newWindowTitle,b):window.History.pushState(null,null,b)},a.hijax_replaceState=function(a,b,d){typeof b=="undefined"&&(b=null),a=a.replace(c,"");var e=window.History.getState();if(a!=e.url.replace(c,"")||d)b.newWindowTitle?window.History.replaceState(b,b.newWindowTitle,a):window.History.replaceState(b,null,a)},a.hijax_getState=function(){return window.History.getState()};var d=function(){var d=a.extend({doAJAX:!0,skipCallback:!1,newWindowTitle:null,context:"statechange"},b);if(!d.readyCheck.call(this)){setTimeout(function(){a(window).trigger("statechange")},500);return}var e=window.History.getState(),f=e.data,g=e.url,h=g.replace(c,"");return typeof f.options=="object"&&(d=a.extend(d,f.options)),d.skipCallback||d.onStatechange.call(this,h,d,e),d.newWindowTitle&&(document.title=d.newWindowTitle),d.doAJAX&&d.contentContainer.length>0&&a.ajax({type:"GET",url:h,beforeSend:function(){document.body.style.cursor="wait",a('a[href="'+h+'"]').addClass("hijax-loading"),d.beforeSend&&d.beforeSend.call(this,d)},success:function(b,c,e){document.body.style.cursor="default";var f;a(d.containerSelector,b).length>0?f=a(d.containerSelector,b).html():f=b,d.htmlToInsert=f,typeof d.beforeAjaxInsert=="function"?d.beforeAjaxInsert.call(this,d,function(){d.contentContainer.html(d.htmlToInsert),d.callback&&d.callback.call(this,d)}):(d.contentContainer.html(d.htmlToInsert),d.callback&&d.callback.call(this,d))},error:function(a,b,c){document.body.style.cursor="default",a.status==404?alert("Page not found: "+this.url):alert(c+": "+this.url)}}),!1},e=function(a){return a.preventDefault(),!1}})(jQuery)
